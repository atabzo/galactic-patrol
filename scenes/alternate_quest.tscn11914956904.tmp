[gd_scene load_steps=8 format=3 uid="uid://bfwko0sr7sj7h"]

[ext_resource type="PackedScene" uid="uid://doqhhk0o3kfih" path="res://scenes/cosmos-background.tscn" id="1_pomre"]
[ext_resource type="PackedScene" uid="uid://3ij332oy6agh" path="res://scenes/cosmos-new.tscn" id="2_76v1n"]
[ext_resource type="PackedScene" uid="uid://3ftjinsp46ma" path="res://scenes/planets.tscn" id="2_i8n5b"]
[ext_resource type="PackedScene" uid="uid://5itikjci4prl" path="res://scenes/spaceship.tscn" id="3_76v1n"]
[ext_resource type="Script" uid="uid://6ettbg05a0wo" path="res://scenes/elemental-scripts/camera-alternate-quest.gd" id="4_irmld"]
[ext_resource type="FontFile" uid="uid://dkkllk7rn2lwp" path="res://fonts/bitcount.ttf" id="6_76v1n"]

[sub_resource type="GDScript" id="GDScript_76v1n"]
script/source = "extends Label

@export var player: Node2D  # This creates a slot in the Inspector
var target_position: Vector2

func _ready() -> void:
    target_position = Vector2(0, 10)
    # Play the pulse animation
    if has_node(\"AnimationPlayer\"):
        $AnimationPlayer.play(\"pulse\")
    else:
        push_warning(\"AnimationPlayer node not found\")

func _process(_delta: float) -> void:
    if player:
        var distance = player.position.distance_to(target_position)
        var direction = (target_position - player.position).normalized()
        var direction_text = get_direction_text(direction)
        text = \"Navigate %s - %.0f units away\" % [direction_text, distance]
    else:
        text = \"Waiting for player...\"

func get_direction_text(dir: Vector2) -> String:
    var angle = rad_to_deg(dir.angle())
    if angle > -45 and angle <= 45:
        return \"EAST →\"
    elif angle > 45 and angle <= 135:
        return \"SOUTH ↓\"
    elif angle > 135 or angle <= -135:
        return \"WEST ←\"
    else:
        return \"NORTH ↑\"
"

[node name="alternate-quest" type="Node2D"]

[node name="cosmos-background" parent="." instance=ExtResource("1_pomre")]

[node name="cosmos-background2" parent="." instance=ExtResource("2_76v1n")]

[node name="planets" parent="." instance=ExtResource("2_i8n5b")]
position = Vector2(-9, 217)

[node name="Spaceship" parent="." instance=ExtResource("3_76v1n")]
position = Vector2(1091, -260.99994)

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("target")]
position = Vector2(948, 538)
position_smoothing_enabled = true
script = ExtResource("4_irmld")
target = NodePath("../Spaceship")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer"]
offset_left = 25.0
offset_top = 859.0
offset_right = 1948.0
offset_bottom = 1059.0
theme_override_fonts/font = ExtResource("6_76v1n")
theme_override_font_sizes/font_size = 105
text = "hey hey hey"
script = SubResource("GDScript_76v1n")

[node name="AnimationPlayer" type="AnimationPlayer" parent="CanvasLayer/Label"]
